"use strict";
/// <reference path="./aStar.ts" />
/// <reference path="./aStarView.d.ts" />
let method;
let runTimeout = -2;
function runBFS() {
    startGame();
    let seq = jqueryElemToNumSeq(pieces);
    method = new bfs(seq, current_blank);
    showInfo();
    addButtons();
}
function showInfo() {
    $("#open-node").text(method.openTable.length.toString());
    $("#total-step").text(method.steps.toString());
    let [lowestNode] = method.getLowestNode();
    let lowNodeState = lowestNode.state.slice();
    lowNodeState.forEach(function (_, index) {
        lowNodeState[index] += 1;
    });
    $("#open-row1").text(lowNodeState.slice(0, 3).toString());
    $("#open-row2").text(lowNodeState.slice(3, 6).toString());
    $("#open-row3").text(lowNodeState.slice(6, 9).toString());
}
function runAStarH1() {
    startGame();
    let seq = jqueryElemToNumSeq(pieces);
    method = new aStarH1(seq, current_blank);
    showInfo();
    addButtons();
}
function runAStarH2() {
    startGame();
    let seq = jqueryElemToNumSeq(pieces);
    method = new aStarH2(seq, current_blank);
    showInfo();
    runTimeout = setTimeout(goNext, 100);
    addButtons();
}
function jqueryElemToNumSeq(arr) {
    let result = [];
    for (var i = 0; i < 9; i++) {
        var className = arr[i].attr("class");
        result.push(Math.abs(className.slice(className.length - 2)));
    }
    return result;
}
function goNext() {
    if (method.checkResult(method.currentNode.state)) {
        clearInterval(runTimeout);
        runTimeout = -2;
        $("#button-area").append($("<button>").
            attr("id", "showpath").addClass("click").
            click(function () {
            let path = method.pathToCurrent;
            current_blank = path[0].blankIndex;
            printPicture(path[0].state);
            let i = 1;
            setTimeout(function displayPath() {
                pieces[path[i++].blankIndex].moveFunc();
                if (i < path.length) {
                    setTimeout(displayPath, 500);
                }
            }, 500);
        }).text("显示路径"));
        $("#next").remove();
        $("#autorun").remove();
        $("#run-all").remove();
        return;
    }
    let [newSeq, newBlank] = method.next();
    showInfo();
    current_blank = newBlank;
    printPicture(newSeq);
    if (method.checkResult(newSeq)) {
        $("#message").text("搜索完成。步数：" + method.steps);
    }
}
function addButtons() {
    $("#button-area").append($("<button>").
        attr("id", "autorun").addClass("click").
        click(function () {
        if (runTimeout !== -2) {
            clearTimeout(runTimeout);
            runTimeout = -2;
            $("#next").show();
            $("#run-all").show();
            $(this).text("自动运行");
        }
        else {
            runTimeout = setInterval(goNext, 1);
            $(this).text("暂停运行");
            $("#next").hide();
            $("#run-all").hide();
        }
    }).text("自动运行"));
    $("#button-area").append($("<button>").
        attr("id", "run-all").addClass("click").
        click(function () {
        method.runAll();
        current_blank = method.currentNode.blankIndex;
        printPicture(method.currentNode.state);
        $("#message").text("搜索完成。步数：" + method.steps);
        goNext();
        showInfo();
    }).text("直接获取"));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYVN0YXJWaWV3LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYVN0YXJWaWV3LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxtQ0FBbUM7QUFDbkMseUNBQXlDO0FBRXpDLElBQUksTUFBb0IsQ0FBQztBQUN6QixJQUFJLFVBQVUsR0FBVyxDQUFDLENBQUMsQ0FBQztBQUU1QixTQUFTLE1BQU07SUFDWCxTQUFTLEVBQUUsQ0FBQztJQUNaLElBQUksR0FBRyxHQUFHLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3JDLE1BQU0sR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFDckMsUUFBUSxFQUFFLENBQUM7SUFDWCxVQUFVLEVBQUUsQ0FBQztBQUNqQixDQUFDO0FBRUQsU0FBUyxRQUFRO0lBQ2IsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBQ3pELENBQUMsQ0FBQyxhQUFhLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBQy9DLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDMUMsSUFBSSxZQUFZLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUM1QyxZQUFZLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFLEtBQUs7UUFDbkMsWUFBWSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM3QixDQUFDLENBQUMsQ0FBQztJQUNILENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUMxRCxDQUFDLENB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QUFJLEVBQUUsQ0FBQztZQUNsQixDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDeEI7SUFDTCxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNqQixDQUFDLENBQUMsY0FBYyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUM7UUFDdEMsSUFBSSxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO1FBQ3ZDLEtBQUssQ0FBRTtRQUNILE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNoQixhQUFhLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUM7UUFDOUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdkMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVDLE1BQU0sRUFBRSxDQUFDO1FBQ1QsUUFBUSxFQUFFLENBQUM7SUFDZixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNyQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vYVN0YXIudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vYVN0YXJWaWV3LmQudHNcIiAvPlxuXG5sZXQgbWV0aG9kOiBzZWFyY2hNZXRob2Q7XG5sZXQgcnVuVGltZW91dDogbnVtYmVyID0gLTI7XG5cbmZ1bmN0aW9uIHJ1bkJGUygpOiBhbnkge1xuICAgIHN0YXJ0R2FtZSgpO1xuICAgIGxldCBzZXEgPSBqcXVlcnlFbGVtVG9OdW1TZXEocGllY2VzKTtcbiAgICBtZXRob2QgPSBuZXcgYmZzKHNlcSwgY3VycmVudF9ibGFuayk7XG4gICAgc2hvd0luZm8oKTtcbiAgICBhZGRCdXR0b25zKCk7XG59XG5cbmZ1bmN0aW9uIHNob3dJbmZvKCk6IGFueSB7XG4gICAgJChcIiNvcGVuLW5vZGVcIikudGV4dChtZXRob2Qub3BlblRhYmxlLmxlbmd0aC50b1N0cmluZygpKTtcbiAgICAkKFwiI3RvdGFsLXN0ZXBcIikudGV4dChtZXRob2Quc3RlcHMudG9TdHJpbmcoKSk7XG4gICAgbGV0IFtsb3dlc3ROb2RlXSA9IG1ldGhvZC5nZXRMb3dlc3ROb2RlKCk7XG4gICAgbGV0IGxvd05vZGVTdGF0ZSA9IGxvd2VzdE5vZGUuc3RhdGUuc2xpY2UoKTtcbiAgICBsb3dOb2RlU3RhdGUuZm9yRWFjaChmdW5jdGlvbiAoXywgaW5kZXgpIHtcbiAgICAgICAgbG93Tm9kZVN0YXRlW2luZGV4XSArPSAxO1xuICAgIH0pO1xuICAgICQoXCIjb3Blbi1yb3cxXCIpLnRleHQobG93Tm9kZVN0YXRlLnNsaWNlKDAsIDMpLnRvU3RyaW5nKCkpO1xuICAgICQoXCIjb3Blbi1yb3cyXCIpLnRleHQobG93Tm9kZVN0YXRlLnNsaWNlKDMsIDYpLnRvU3RyaW5nKCkpO1xuICAgICQoXCIjb3Blbi1yb3czXCIpLnRleHQobG93Tm9kZVN0YXRlLnNsaWNlKDYsIDkpLnRvU3RyaW5nKCkpO1xufVxuXG5mdW5jdGlvbiBydW5BU3RhckgxKCk6IGFueSB7XG4gICAgc3RhcnRHYW1lKCk7XG4gICAgbGV0IHNlcSA9IGpxdWVyeUVsZW1Ub051bVNlcShwaWVjZXMpO1xuICAgIG1ldGhvZCA9IG5ldyBhU3RhckgxKHNlcSwgY3VycmVudF9ibGFuayk7XG4gICAgc2hvd0luZm8oKTtcbiAgICBhZGRCdXR0b25zKCk7XG59XG5cbmZ1bmN0aW9uIHJ1bkFTdGFySDIoKTogYW55IHtcbiAgICBzdGFydEdhbWUoKTtcbiAgICBsZXQgc2VxID0ganF1ZXJ5RWxlbVRvTnVtU2VxKHBpZWNlcyk7XG4gICAgbWV0aG9kID0gbmV3IGFTdGFySDIoc2VxLCBjdXJyZW50X2JsYW5rKTtcbiAgICBzaG93SW5mbygpO1xuICAgIHJ1blRpbWVvdXQgPSBzZXRUaW1lb3V0KGdvTmV4dCwgMTAwKTtcbiAgICBhZGRCdXR0b25zKCk7XG59XG5cblxuZnVuY3Rpb24ganF1ZXJ5RWxlbVRvTnVtU2VxKGFycjogYW55W10pOiBudW1iZXJbXSB7XG4gICAgbGV0IHJlc3VsdDogbnVtYmVyW10gPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDk7IGkrKykge1xuICAgICAgICB2YXIgY2xhc3NOYW1lID0gYXJyW2ldLmF0dHIoXCJjbGFzc1wiKTtcbiAgICAgICAgcmVzdWx0LnB1c2goTWF0aC5hYnMoY2xhc3NOYW1lLnNsaWNlKGNsYXNzTmFtZS5sZW5ndGggLSAyKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGdvTmV4dCgpOiBhbnkge1xuICAgIGlmIChtZXRob2QuY2hlY2tSZXN1bHQobWV0aG9kLmN1cnJlbnROb2RlLnN0YXRlKSkge1xuICAgICAgICBjbGVhckludGVydmFsKHJ1blRpbWVvdXQpO1xuICAgICAgICBydW5UaW1lb3V0ID0gLTI7XG4gICAgICAgICQoXCIjYnV0dG9uLWFyZWFcIikuYXBwZW5kKCQoXCI8YnV0dG9uPlwiKS5cbiAgICAgICAgYXR0cihcImlkXCIsIFwic2hvd3BhdGhcIikuYWRkQ2xhc3MoXCJjbGlja1wiKS5cbiAgICAgICAgY2xpY2soIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCBwYXRoID0gbWV0aG9kLnBhdGhUb0N1cnJlbnQ7XG4gICAgICAgICAgICBjdXJyZW50X2JsYW5rID0gcGF0aFswXS5ibGFua0luZGV4O1xuICAgICAgICAgICAgcHJpbnRQaWN0dXJlKHBhdGhbMF0uc3RhdGUpO1xuICAgICAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiBkaXNwbGF5UGF0aCgpIHtcbiAgICAgICAgICAgICAgICBwaWVjZXNbcGF0aFtpKytdLmJsYW5rSW5kZXhdLm1vdmVGdW5jKCk7XG4gICAgICAgICAgICAgICAgaWYgKGkgPCBwYXRoLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGRpc3BsYXlQYXRoLCA1MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH0pLnRleHQoXCLmmL7npLrot6/lvoRcIikpO1xuICAgICAgICAkKFwiI25leHRcIikucmVtb3ZlKCk7XG4gICAgICAgICQoXCIjYXV0b3J1blwiKS5yZW1vdmUoKTtcbiAgICAgICAgJChcIiNydW4tYWxsXCIpLnJlbW92ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBbbmV3U2VxLCBuZXdCbGFua10gPSBtZXRob2QubmV4dCgpO1xuICAgIHNob3dJbmZvKCk7XG4gICAgY3VycmVudF9ibGFuayA9IG5ld0JsYW5rO1xuICAgIHByaW50UGljdHVyZShuZXdTZXEpO1xuICAgIGlmIChtZXRob2QuY2hlY2tSZXN1bHQobmV3U2VxKSkge1xuICAgICAgICAkKFwiI21lc3NhZ2VcIikudGV4dChcIuaQnOe0ouWujOaIkOOAguatpeaVsO+8mlwiK21ldGhvZC5zdGVwcyk7XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIGFkZEJ1dHRvbnMoKSB7XG4gICAgJChcIiNidXR0b24tYXJlYVwiKS5hcHBlbmQoJChcIjxidXR0b24+XCIpLlxuICAgIGF0dHIoXCJpZFwiLCBcImF1dG9ydW5cIikuYWRkQ2xhc3MoXCJjbGlja1wiKS5cbiAgICBjbGljayggZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAocnVuVGltZW91dCAhPT0gLTIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChydW5UaW1lb3V0KTtcbiAgICAgICAgICAgIHJ1blRpbWVvdXQgPSAtMjtcbiAgICAgICAgICAgICQoXCIjbmV4dFwiKS5zaG93KCk7XG4gICAgICAgICAgICAkKFwiI3J1bi1hbGxcIikuc2hvdygpO1xuICAgICAgICAgICAgJCh0aGlzKS50ZXh0KFwi6Ieq5Yqo6L+Q6KGMXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcnVuVGltZW91dCA9IHNldEludGVydmFsKGdvTmV4dCwgMSk7XG4gICAgICAgICAgICAkKHRoaXMpLnRleHQoXCLmmoLlgZzov5DooYxcIik7XG4gICAgICAgICAgICAkKFwiI25leHRcIikuaGlkZSgpO1xuICAgICAgICAgICAgJChcIiNydW4tYWxsXCIpLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH0pLnRleHQoXCLoh6rliqjov5DooYxcIikpO1xuICAgICQoXCIjYnV0dG9uLWFyZWFcIikuYXBwZW5kKCQoXCI8YnV0dG9uPlwiKS5cbiAgICBhdHRyKFwiaWRcIiwgXCJydW4tYWxsXCIpLmFkZENsYXNzKFwiY2xpY2tcIikuXG4gICAgY2xpY2soIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWV0aG9kLnJ1bkFsbCgpO1xuICAgICAgICBjdXJyZW50X2JsYW5rID0gbWV0aG9kLmN1cnJlbnROb2RlLmJsYW5rSW5kZXg7XG4gICAgICAgIHByaW50UGljdHVyZShtZXRob2QuY3VycmVudE5vZGUuc3RhdGUpO1xuICAgICAgICAkKFwiI21lc3NhZ2VcIikudGV4dChcIuaQnOe0ouWujOaIkOOAguatpeaVsO+8mlwiK21ldGhvZC5zdGVwcyk7XG4gICAgICAgIGdvTmV4dCgpO1xuICAgICAgICBzaG93SW5mbygpO1xuICAgIH0pLnRleHQoXCLnm7TmjqXojrflj5ZcIikpO1xufVxuXG5cbiJdfQ==